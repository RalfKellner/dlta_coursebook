
<!DOCTYPE html>


<html lang="en" data-content_root="./" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Case study form 8K filings &#8212; Deep Learning and Text Analysis in Finance</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  <!-- 
    this give us a css class that will be invisible only if js is disabled 
  -->
  <noscript>
    <style>
      .pst-js-only { display: none !important; }

    </style>
  </noscript>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="_static/styles/theme.css?digest=26a4bc78f4c0ddb94549" rel="stylesheet" />
<link href="_static/styles/pydata-sphinx-theme.css?digest=26a4bc78f4c0ddb94549" rel="stylesheet" />

    <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=fa44fd50" />
    <link rel="stylesheet" type="text/css" href="_static/styles/sphinx-book-theme.css?v=a3416100" />
    <link rel="stylesheet" type="text/css" href="_static/togglebutton.css?v=13237357" />
    <link rel="stylesheet" type="text/css" href="_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css" />
    <link rel="stylesheet" type="text/css" href="_static/sphinx-thebe.css?v=4fa983c6" />
    <link rel="stylesheet" type="text/css" href="_static/sphinx-design.min.css?v=95c83b7e" />
  
  <!-- So that users can add custom icons -->
  <script src="_static/scripts/fontawesome.js?digest=26a4bc78f4c0ddb94549"></script>
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="_static/scripts/bootstrap.js?digest=26a4bc78f4c0ddb94549" />
<link rel="preload" as="script" href="_static/scripts/pydata-sphinx-theme.js?digest=26a4bc78f4c0ddb94549" />

    <script src="_static/documentation_options.js?v=9eb32ce0"></script>
    <script src="_static/doctools.js?v=9a2dae69"></script>
    <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="_static/copybutton.js?v=f281be69"></script>
    <script src="_static/scripts/sphinx-book-theme.js?v=887ef09a"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="_static/togglebutton.js?v=4a39c7ea"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="_static/design-tabs.js?v=f930bc37"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script async="async" src="_static/sphinx-thebe.js?v=c100c467"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script>window.MathJax = {"options": {"processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
    <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = '10_case_study_8k';</script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="prev" title="BERT" href="09_bert.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  <meta name="docsearch:version" content="" />
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <dialog id="pst-search-dialog">
    
<form class="bd-search d-flex align-items-center"
      action="search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         placeholder="Search this book..."
         aria-label="Search this book..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form>
  </dialog>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <dialog id="pst-primary-sidebar-modal"></dialog>
      <div id="pst-primary-sidebar" class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">

  
    
  

<a class="navbar-brand logo" href="00_welcome.html">
  
  
  
  
  
  
    <p class="title logo__title">Deep Learning and Text Analysis in Finance</p>
  
</a></div>
        <div class="sidebar-primary-item">

<button class="btn search-button-field search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
 <i class="fa-solid fa-magnifying-glass"></i>
 <span class="search-button__default-text">Search</span>
 <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
</button></div>
        <div class="sidebar-primary-item"><nav class="bd-links bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="00_welcome.html">
                    Welcome
                </a>
            </li>
        </ul>
        <ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="01_wording_preprocessing.html">Preprocessing text</a></li>
<li class="toctree-l1"><a class="reference internal" href="02_frequency_dictionary_models.html">Frequency based text models</a></li>
<li class="toctree-l1"><a class="reference internal" href="03_financial_words_analysis.html">Applications of word frequencies in finance</a></li>
<li class="toctree-l1"><a class="reference internal" href="04_neural_networks.html">Neural networks</a></li>
<li class="toctree-l1"><a class="reference internal" href="05_word_embeddings.html">Word embeddings with Word2Vec</a></li>
<li class="toctree-l1"><a class="reference internal" href="06_document_embeddings.html">Document embeddings with Doc2Vec</a></li>
<li class="toctree-l1"><a class="reference internal" href="07_text_analysis_finance.html">Text analysis in finance</a></li>
<li class="toctree-l1"><a class="reference internal" href="08_transformer.html">Attention!</a></li>
<li class="toctree-l1"><a class="reference internal" href="09_bert.html">BERT</a></li>
<li class="toctree-l1 current active"><a class="current reference internal" href="#">Case study form 8K filings</a></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><button class="sidebar-toggle primary-toggle btn btn-sm" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</button></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-source-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Source repositories">
    <i class="fab fa-github"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://github.com/executablebooks/jupyter-book" target="_blank"
   class="btn btn-sm btn-source-repository-button dropdown-item"
   title="Source repository"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="btn__text-container">Repository</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.com/executablebooks/jupyter-book/issues/new?title=Issue%20on%20page%20%2F10_case_study_8k.html&body=Your%20issue%20content%20here." target="_blank"
   class="btn btn-sm btn-source-issues-button dropdown-item"
   title="Open an issue"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="btn__text-container">Open issue</span>
</a>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="_sources/10_case_study_8k.ipynb" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.ipynb</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>



<button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button pst-js-only" aria-label="Color mode" data-bs-title="Color mode"  data-bs-placement="bottom" data-bs-toggle="tooltip">
  <i class="theme-switch fa-solid fa-sun                fa-lg" data-mode="light" title="Light"></i>
  <i class="theme-switch fa-solid fa-moon               fa-lg" data-mode="dark"  title="Dark"></i>
  <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"  title="System Settings"></i>
</button>


<button class="btn btn-sm pst-navbar-icon search-button search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
</button>
<button class="sidebar-toggle secondary-toggle btn btn-sm" title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</button>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>Case study form 8K filings</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#form-8k-filings">Form 8K filings</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#financial-sentiment-in-form-8k-filings">Financial sentiment in form 8K filings</a></li>
</ul>
            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section class="tex2jax_ignore mathjax_ignore" id="case-study-form-8k-filings">
<h1>Case study form 8K filings<a class="headerlink" href="#case-study-form-8k-filings" title="Link to this heading">#</a></h1>
<p>Given the impressions from the last chapter, we want to examine the relation between textual information and stock market reactions a little further. Entities which issue securities must file with the US Securities and Exchange Commission (SEC). A full list of all forms can be found <a class="reference external" href="https://www.sec.gov/forms">here</a>, however, for stock market companies, common filings are of form 4, 8K, 10Q and 10K. Form 4 filings need to be filed by directors, officers and owners holding more than 10% of a company’s shares. Form 4 filings include statements of ownerships and inform the public about ownership changes which could rely upon insider information. These filings usually do not include a large amount of textual information.</p>
<p>Besides, 10Q and 10K form filings are quarterly and annual reports which are filed on a regular basis and include a large amount of textual information. If events occur which should be announced to the shareholders of the company between quarterly and annual reports, 8K forms must be filed. These filings usually are shorter than 10Q and 10K filings, however, due to their ad-hoc nature, they may cause the largest stock market reactions. This is why we are going to focus on form 8K filings and corresponding stock market reactions in this case study.</p>
<section id="form-8k-filings">
<h2>Form 8K filings<a class="headerlink" href="#form-8k-filings" title="Link to this heading">#</a></h2>
<p>The events which trigger the need for form 8K filings are defined by so items which are ascribed to different sections.</p>
<ul class="simple">
<li><p>Section: Registrant’s Business and Operations</p>
<ul>
<li><p>Item 1.01: Entry into a Material Definitive Agreement</p></li>
<li><p>Item 1.02: Termination of a Material Definitive Agreement</p></li>
<li><p>Item 1.03: Bankruptcy or Receivership</p></li>
<li><p>Item 1.04: Mine Safety - Reporting of Shutdowns and Patterns of Violations</p></li>
</ul>
</li>
<li><p>Section: Financial Information</p>
<ul>
<li><p>Item 2.01: Completion of Acquisition or Disposition of Assets</p></li>
<li><p>Item 2.02: Results of Operations and Financial Condition</p></li>
<li><p>Item 2.03: Creation of a Direct Financial Obligation or an Obligation under an Off-Balance Sheet Arrangement of a Registrant</p></li>
<li><p>Item 2.04: Triggering Events That Accelerate or Increase a Direct Financial Obligation or an Obligation under an Off-Balance Sheet Arrangement</p></li>
<li><p>Item 2.05: Costs Associated with Exit or Disposal Activities</p></li>
<li><p>Item 2.06: Material Impairments</p></li>
</ul>
</li>
<li><p>Section: Securities and Trading Markets</p>
<ul>
<li><p>Item 3.01: Notice of Delisting or Failure to Satisfy a Continued Listing Rule or Standard; Transfer of Listing</p></li>
<li><p>Item 3.02: Unregistered Sales of Equity Securities</p></li>
<li><p>Item 3.03: Material Modification to Rights of Security Holders</p></li>
</ul>
</li>
<li><p>Section: Matters Related to Accountants and Financial Statements</p>
<ul>
<li><p>Item 4.01: Changes in Registrant’s Certifying Accountant</p></li>
<li><p>Item 4.02: Non-Reliance on Previously Issued Financial Statements or a Related Audit Report or Completed Interim Review</p></li>
</ul>
</li>
<li><p>Section: Corporate Governance and Management</p>
<ul>
<li><p>Item 5.01: Changes in Control of Registrant</p></li>
<li><p>Item 5.02: Departure of Directors or Certain Officers; Election of Directors; Appointment of Certain Officers; Compensatory Arrangements of Certain Officers</p></li>
<li><p>Item 5.03: Amendments to Articles of Incorporation or Bylaws; Change in Fiscal Year</p></li>
<li><p>Item 5.04: Temporary Suspension of Trading Under Registrant’s Employee Benefit Plans</p></li>
<li><p>Item 5.05: Amendment to Registrant’s Code of Ethics, or Waiver of a Provision of the Code of Ethics</p></li>
<li><p>Item 5.06: Change in Shell Company Status</p></li>
<li><p>Item 5.07: Submission of Matters to a Vote of Security Holders</p></li>
<li><p>Item 5.08: Shareholder Director Nominations</p></li>
</ul>
</li>
<li><p>Section: Asset-Backed Securities</p>
<ul>
<li><p>Item 6.01: ABS Informational and Computational Material</p></li>
<li><p>Item 6.02: Change of Servicer or Trustee</p></li>
<li><p>Item 6.03: Change in Credit Enhancement or Other External Support</p></li>
<li><p>Item 6.04: Failure to Make a Required Distribution</p></li>
<li><p>Item 6.05: Securities Act Updating Disclosure</p></li>
</ul>
</li>
<li><p>Section: Regulation FD</p>
<ul>
<li><p>Item 7.01: Regulation FD Disclosure</p></li>
</ul>
</li>
<li><p>Section: Other Events</p>
<ul>
<li><p>Item 8.01: Other Events (The registrant can use this Item to report events that are not specifically called for by Form 8-K, that the registrant considers to be of importance to security holders.)</p></li>
</ul>
</li>
<li><p>Section: Financial Statements and Exhibits</p>
<ul>
<li><p>Item 9.01: Financial Statements and Exhibits</p></li>
</ul>
</li>
</ul>
<p>Companies usually must submit the filing to the SEC within four business days. Details on how to read these filings are provided <a class="reference external" href="https://www.sec.gov/investor/pubs/readan8k.pdf">here</a>. Each filing can contain more than one time at the same time. Besides plain form 8K filings, companies can append further information by adding exhibits to the filing. Common examples are press release statements.</p>
<p>The cell below shows item occurrences for all 8K filings by Apple since 2004. We observe that Financial Statements and Exhibits (Item 9.01) as well as Results of Operations and Financial Condition (2.02) are the most common items.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>

<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s2">&quot;../data/apple_filing_types_full.csv&quot;</span><span class="p">)</span>
<span class="n">form_8k_filing</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">df</span><span class="o">.</span><span class="n">form</span> <span class="o">==</span> <span class="s2">&quot;8-K&quot;</span><span class="p">]</span>
<span class="n">items_sep</span> <span class="o">=</span><span class="n">form_8k_filing</span><span class="p">[</span><span class="s2">&quot;items&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;,&quot;</span><span class="p">))</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>

<span class="n">items_all</span> <span class="o">=</span> <span class="p">[]</span>
<span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">items_sep</span><span class="p">:</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">item</span><span class="p">:</span>
        <span class="n">items_all</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>

<span class="n">item_type</span><span class="p">,</span> <span class="n">num_filings</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">unique</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">items_all</span><span class="p">),</span> <span class="n">return_counts</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">aapl_8k_items</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="nb">dict</span><span class="p">(</span><span class="n">item_type</span> <span class="o">=</span> <span class="n">item_type</span><span class="p">,</span> <span class="n">num_filings</span> <span class="o">=</span> <span class="n">num_filings</span><span class="p">))</span>
<span class="n">aapl_8k_items</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="n">by</span> <span class="o">=</span> <span class="s2">&quot;num_filings&quot;</span><span class="p">,</span> <span class="n">ascending</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span><span class="o">.</span><span class="n">set_index</span><span class="p">(</span><span class="s2">&quot;item_type&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>num_filings</th>
    </tr>
    <tr>
      <th>item_type</th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>9.01</th>
      <td>136</td>
    </tr>
    <tr>
      <th>2.02</th>
      <td>83</td>
    </tr>
    <tr>
      <th>8.01</th>
      <td>41</td>
    </tr>
    <tr>
      <th>5.02</th>
      <td>31</td>
    </tr>
    <tr>
      <th>5.03</th>
      <td>14</td>
    </tr>
    <tr>
      <th>5.07</th>
      <td>14</td>
    </tr>
    <tr>
      <th>1.01</th>
      <td>6</td>
    </tr>
    <tr>
      <th>7.01</th>
      <td>5</td>
    </tr>
    <tr>
      <th>12</th>
      <td>3</td>
    </tr>
    <tr>
      <th>7</th>
      <td>3</td>
    </tr>
    <tr>
      <th>3.01</th>
      <td>1</td>
    </tr>
    <tr>
      <th>3.03</th>
      <td>1</td>
    </tr>
    <tr>
      <th>4.01</th>
      <td>1</td>
    </tr>
    <tr>
      <th>4.02</th>
      <td>1</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
</section>
<section id="financial-sentiment-in-form-8k-filings">
<h2>Financial sentiment in form 8K filings<a class="headerlink" href="#financial-sentiment-in-form-8k-filings" title="Link to this heading">#</a></h2>
<p>The aim of this case study is to identify financial sentiment in 8K filings, and, if a correlation between this sentiment and corresponding stock market reactions exist. We make use of Apple’s 8K filings in this notebook. Below you see the input of our dataset for this example. It contains the filing as well as report date, items, the 8K filings, and, if present the extension of the filing.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>

<span class="n">aapl_8ks</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s2">&quot;../data/aapl_8k_reports_and_extensions.csv&quot;</span><span class="p">)</span>
<span class="n">aapl_8ks</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>filingDate</th>
      <th>reportDate</th>
      <th>items</th>
      <th>report</th>
      <th>extension991</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>2023-11-02</td>
      <td>2023-11-02</td>
      <td>2.02,9.01</td>
      <td>8-K 1 aapl-20231102.htm 8-K aapl-20231102false...</td>
      <td>EX-99.1 2 a8-kex991q4202309302023.htm EX-99.1 ...</td>
    </tr>
    <tr>
      <th>1</th>
      <td>2023-08-03</td>
      <td>2023-08-03</td>
      <td>2.02,9.01</td>
      <td>8-K 1 aapl-20230803.htm 8-K aapl-20230803false...</td>
      <td>EX-99.1 2 a8-kex991q3202307012023.htm EX-99.1 ...</td>
    </tr>
    <tr>
      <th>2</th>
      <td>2023-05-10</td>
      <td>2023-05-08</td>
      <td>8.01,9.01</td>
      <td>8-K 1 ny20007635x4_8k.htm 8-K truetruetruetrue...</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>3</th>
      <td>2023-05-04</td>
      <td>2023-05-04</td>
      <td>2.02,9.01</td>
      <td>8-K 1 aapl-20230504.htm 8-K aapl-20230504false...</td>
      <td>EX-99.1 2 a8-kex991q2202304012023.htm EX-99.1 ...</td>
    </tr>
    <tr>
      <th>4</th>
      <td>2023-03-10</td>
      <td>2023-03-10</td>
      <td>5.07</td>
      <td>8-K 1 brhc10049413_8k.htm 8-K truetruetruetrue...</td>
      <td>NaN</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>If we want to examine the sentiment in these filings with a Bert-type model, FinBert seems to be a natural choice as it has been trained and fine-tuned to identify the tone of domain specific language used on financial markets. As the Bert model, it can has been trained with a maximum sequence lenght of 512 tokens. So, in a first step, let us examine the number of tokens in 8K filings and their extensions.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">transformers</span> <span class="kn">import</span> <span class="n">BertTokenizer</span>
<span class="kn">import</span> <span class="nn">matplotlib.pylab</span> <span class="k">as</span> <span class="nn">plt</span>


<span class="n">tokenizer</span> <span class="o">=</span> <span class="n">BertTokenizer</span><span class="o">.</span><span class="n">from_pretrained</span><span class="p">(</span><span class="s2">&quot;yiyanghkust/finbert-tone&quot;</span><span class="p">)</span>
<span class="n">reports</span> <span class="o">=</span> <span class="p">[</span><span class="n">report</span> <span class="k">for</span> <span class="n">report</span> <span class="ow">in</span> <span class="n">aapl_8ks</span><span class="o">.</span><span class="n">report</span> <span class="k">if</span> <span class="ow">not</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">isnull</span><span class="p">(</span><span class="n">report</span><span class="p">))]</span>
<span class="n">tokenized_8k_reports</span> <span class="o">=</span> <span class="n">tokenizer</span><span class="p">(</span><span class="n">reports</span><span class="p">)</span>
<span class="n">extensions</span> <span class="o">=</span> <span class="p">[</span><span class="n">extension</span> <span class="k">for</span> <span class="n">extension</span> <span class="ow">in</span> <span class="n">aapl_8ks</span><span class="o">.</span><span class="n">extension991</span> <span class="k">if</span> <span class="ow">not</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">isnull</span><span class="p">(</span><span class="n">extension</span><span class="p">))]</span>
<span class="n">tokenized_extensions</span> <span class="o">=</span> <span class="n">tokenizer</span><span class="p">(</span><span class="n">extensions</span><span class="p">)</span>
<span class="n">report_lengths</span> <span class="o">=</span> <span class="p">[</span><span class="nb">sum</span><span class="p">(</span><span class="n">att_mask</span><span class="p">)</span> <span class="k">for</span> <span class="n">att_mask</span> <span class="ow">in</span> <span class="n">tokenized_8k_reports</span><span class="o">.</span><span class="n">attention_mask</span><span class="p">]</span>
<span class="n">extension_lengths</span> <span class="o">=</span> <span class="p">[</span><span class="nb">sum</span><span class="p">(</span><span class="n">att_mask</span><span class="p">)</span> <span class="k">for</span> <span class="n">att_mask</span> <span class="ow">in</span> <span class="n">tokenized_extensions</span><span class="o">.</span><span class="n">attention_mask</span><span class="p">]</span>

<span class="n">fig</span><span class="p">,</span> <span class="n">axs</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">figsize</span> <span class="o">=</span> <span class="p">(</span><span class="mi">12</span><span class="p">,</span> <span class="mi">6</span><span class="p">))</span>
<span class="n">axs</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">hist</span><span class="p">(</span><span class="n">report_lengths</span><span class="p">)</span>
<span class="n">axs</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s2">&quot;Number of tokens per report&quot;</span><span class="p">)</span>
<span class="n">axs</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">hist</span><span class="p">(</span><span class="n">extension_lengths</span><span class="p">)</span>
<span class="n">axs</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s2">&quot;Number of tokens per extension (if present)&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>/Users/ralf/Library/Mobile Documents/com~apple~CloudDocs/Kurse/DLTA/.venv/lib/python3.11/site-packages/tqdm/auto.py:21: TqdmWarning: IProgress not found. Please update jupyter and ipywidgets. See https://ipywidgets.readthedocs.io/en/stable/user_install.html
  from .autonotebook import tqdm as notebook_tqdm
</pre></div>
</div>
<img alt="_images/3b240aca45dc6ad6aa32d5f87dd82f01f0f87094be380ecf9bc17592ba80215e.png" src="_images/3b240aca45dc6ad6aa32d5f87dd82f01f0f87094be380ecf9bc17592ba80215e.png" />
</div>
</div>
<p>We observe that it seems not to be an option to process reports nor their extension as a single text sequence. Both text types include far more than 512 tokens and we would loose a lot of information by simply truncating these text sequences. Thus, as an alternative, we split each report into sentence and identify the sentiment of each sentence first. Once this is done, we aggregate the list of labeled sentences by:</p>
<div class="math notranslate nohighlight">
\[
\frac{s^{pos} - s^{neg}}{s^{pos} + s^{neg}}
\]</div>
<p>where <span class="math notranslate nohighlight">\(s^{pos}, s^{neg}\)</span> are sentences which are labeled as positive and negative, respectively. If all sentences are labeled to have a neutral financial tone, we set the value to zero.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">transformers</span> <span class="kn">import</span> <span class="n">pipeline</span>
<span class="kn">import</span> <span class="nn">nltk.data</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">matplotlib.pylab</span> <span class="k">as</span> <span class="nn">plt</span>


<span class="c1"># a function to filter out sentences with less than five white space separated tokens</span>
<span class="k">def</span> <span class="nf">nbr_ws_tokens</span><span class="p">(</span><span class="n">sentence</span><span class="p">):</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">sentence</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot; &quot;</span><span class="p">))</span> <span class="o">&gt;</span> <span class="mi">5</span><span class="p">:</span>
        <span class="k">return</span> <span class="kc">True</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="kc">False</span>

<span class="c1"># a function to summarize financial sentiments of all sentences found in a report</span>
<span class="k">def</span> <span class="nf">finbert_polarity</span><span class="p">(</span><span class="n">sentiment_labels</span><span class="p">):</span>
    <span class="n">finbert_polarity</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="n">labels</span><span class="p">,</span> <span class="n">counts</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">unique</span><span class="p">(</span><span class="n">sentiment_labels</span><span class="p">,</span> <span class="n">return_counts</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span>

    <span class="k">for</span> <span class="n">label</span><span class="p">,</span> <span class="n">count</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">labels</span><span class="p">,</span> <span class="n">counts</span><span class="p">):</span>
        <span class="n">finbert_polarity</span><span class="p">[</span><span class="n">label</span><span class="p">]</span> <span class="o">=</span> <span class="n">count</span>

    <span class="n">finbert_keys</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">finbert_polarity</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>

    <span class="k">if</span> <span class="s2">&quot;Positive&quot;</span> <span class="ow">in</span> <span class="n">finbert_keys</span><span class="p">:</span>
        <span class="n">num_positives</span> <span class="o">=</span> <span class="n">finbert_polarity</span><span class="p">[</span><span class="s2">&quot;Positive&quot;</span><span class="p">]</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">num_positives</span> <span class="o">=</span> <span class="mi">0</span>

    <span class="k">if</span> <span class="s2">&quot;Negative&quot;</span> <span class="ow">in</span> <span class="n">finbert_keys</span><span class="p">:</span>
        <span class="n">num_negatives</span> <span class="o">=</span> <span class="n">finbert_polarity</span><span class="p">[</span><span class="s2">&quot;Negative&quot;</span><span class="p">]</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">num_negatives</span> <span class="o">=</span> <span class="mi">0</span>

    <span class="k">if</span> <span class="p">(</span><span class="n">num_positives</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="n">num_negatives</span> <span class="o">==</span> <span class="mi">0</span><span class="p">):</span>
        <span class="n">final_score</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">final_score</span> <span class="o">=</span> <span class="p">(</span><span class="n">num_positives</span> <span class="o">-</span> <span class="n">num_negatives</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span><span class="n">num_positives</span> <span class="o">+</span> <span class="n">num_negatives</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">final_score</span>

<span class="c1"># define the Bert model for labeling the sentences</span>
<span class="n">fin_sentiment</span> <span class="o">=</span> <span class="n">pipeline</span><span class="p">(</span><span class="s2">&quot;text-classification&quot;</span><span class="p">,</span> <span class="n">tokenizer</span> <span class="o">=</span> <span class="s2">&quot;yiyanghkust/finbert-tone&quot;</span><span class="p">,</span> <span class="n">model</span> <span class="o">=</span> <span class="s2">&quot;yiyanghkust/finbert-tone&quot;</span><span class="p">)</span>
<span class="c1"># the sentence split model</span>
<span class="n">sent_detector</span> <span class="o">=</span> <span class="n">nltk</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="s1">&#39;tokenizers/punkt/english.pickle&#39;</span><span class="p">)</span>

<span class="k">if</span> <span class="s1">&#39;aapl_8k_reports_and_extensions_w_polarities.csv&#39;</span> <span class="ow">in</span> <span class="n">os</span><span class="o">.</span><span class="n">listdir</span><span class="p">(</span><span class="s2">&quot;../data/&quot;</span><span class="p">):</span>
    <span class="n">aapl_8ks</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s2">&quot;../data/aapl_8k_reports_and_extensions_w_polarities.csv&quot;</span><span class="p">)</span>
<span class="k">else</span><span class="p">:</span>
    <span class="n">aapl_8ks</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span> <span class="s2">&quot;report_polarities&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">NA</span>
    <span class="n">aapl_8ks</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span> <span class="s2">&quot;extension_polarities&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">NA</span>
    <span class="k">for</span> <span class="n">idx</span><span class="p">,</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">tqdm</span><span class="p">(</span><span class="n">aapl_8ks</span><span class="o">.</span><span class="n">iterrows</span><span class="p">()):</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">isnull</span><span class="p">(</span><span class="n">row</span><span class="o">.</span><span class="n">report</span><span class="p">)):</span>
                <span class="n">report_sentences</span> <span class="o">=</span> <span class="n">sent_detector</span><span class="o">.</span><span class="n">tokenize</span><span class="p">(</span><span class="n">row</span><span class="o">.</span><span class="n">report</span><span class="p">)</span>
                <span class="n">report_sentences</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">filter</span><span class="p">(</span><span class="n">nbr_ws_tokens</span><span class="p">,</span> <span class="n">report_sentences</span><span class="p">))</span>
                <span class="n">max_length</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="nb">max</span><span class="p">([</span><span class="nb">len</span><span class="p">(</span><span class="n">sentence</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot; &quot;</span><span class="p">))</span> <span class="k">for</span> <span class="n">sentence</span> <span class="ow">in</span> <span class="n">report_sentences</span><span class="p">]),</span> <span class="mi">512</span><span class="p">)</span>
                <span class="n">sentiments</span> <span class="o">=</span> <span class="n">fin_sentiment</span><span class="p">(</span><span class="n">report_sentences</span><span class="p">,</span> <span class="n">padding</span> <span class="o">=</span> <span class="s2">&quot;max_length&quot;</span><span class="p">,</span> <span class="n">max_length</span> <span class="o">=</span> <span class="n">max_length</span><span class="p">,</span> <span class="n">truncation</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span>
                <span class="n">sentiment_labels</span> <span class="o">=</span> <span class="p">[</span><span class="n">sentiment</span><span class="p">[</span><span class="s2">&quot;label&quot;</span><span class="p">]</span> <span class="k">for</span> <span class="n">sentiment</span> <span class="ow">in</span> <span class="n">sentiments</span><span class="p">]</span>
                <span class="n">sentiment_scores</span> <span class="o">=</span> <span class="p">[</span><span class="n">sentiment</span><span class="p">[</span><span class="s2">&quot;score&quot;</span><span class="p">]</span> <span class="k">for</span> <span class="n">sentiment</span> <span class="ow">in</span> <span class="n">sentiments</span><span class="p">]</span>
                <span class="n">aapl_8ks</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">idx</span><span class="p">,</span> <span class="s2">&quot;report_polarities&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">finbert_polarity</span><span class="p">(</span><span class="n">sentiment_labels</span><span class="p">)</span>
            <span class="k">if</span> <span class="ow">not</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">isnull</span><span class="p">(</span><span class="n">row</span><span class="o">.</span><span class="n">extension991</span><span class="p">)):</span>
                <span class="n">report_sentences</span> <span class="o">=</span> <span class="n">sent_detector</span><span class="o">.</span><span class="n">tokenize</span><span class="p">(</span><span class="n">row</span><span class="o">.</span><span class="n">extension991</span><span class="p">)</span>
                <span class="n">report_sentences</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">filter</span><span class="p">(</span><span class="n">nbr_ws_tokens</span><span class="p">,</span> <span class="n">report_sentences</span><span class="p">))</span>
                <span class="n">max_length</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="nb">max</span><span class="p">([</span><span class="nb">len</span><span class="p">(</span><span class="n">sentence</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot; &quot;</span><span class="p">))</span> <span class="k">for</span> <span class="n">sentence</span> <span class="ow">in</span> <span class="n">report_sentences</span><span class="p">]),</span> <span class="mi">512</span><span class="p">)</span>
                <span class="n">sentiments</span> <span class="o">=</span> <span class="n">fin_sentiment</span><span class="p">(</span><span class="n">report_sentences</span><span class="p">,</span> <span class="n">padding</span> <span class="o">=</span> <span class="s2">&quot;max_length&quot;</span><span class="p">,</span> <span class="n">max_length</span> <span class="o">=</span> <span class="n">max_length</span><span class="p">,</span> <span class="n">truncation</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span>
                <span class="n">sentiment_labels</span> <span class="o">=</span> <span class="p">[</span><span class="n">sentiment</span><span class="p">[</span><span class="s2">&quot;label&quot;</span><span class="p">]</span> <span class="k">for</span> <span class="n">sentiment</span> <span class="ow">in</span> <span class="n">sentiments</span><span class="p">]</span>
                <span class="n">sentiment_scores</span> <span class="o">=</span> <span class="p">[</span><span class="n">sentiment</span><span class="p">[</span><span class="s2">&quot;score&quot;</span><span class="p">]</span> <span class="k">for</span> <span class="n">sentiment</span> <span class="ow">in</span> <span class="n">sentiments</span><span class="p">]</span>
                <span class="n">aapl_8ks</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">idx</span><span class="p">,</span> <span class="s2">&quot;extension_polarities&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">finbert_polarity</span><span class="p">(</span><span class="n">sentiment_labels</span><span class="p">)</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="n">idx</span><span class="p">)</span>
    <span class="n">aapl_8ks</span><span class="o">.</span><span class="n">to_csv</span><span class="p">(</span><span class="s2">&quot;../data/aapl_8k_reports_and_extensions_w_polarities.csv&quot;</span><span class="p">,</span> <span class="n">index</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span>


<span class="n">fig</span><span class="p">,</span> <span class="n">axs</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">figsize</span> <span class="o">=</span> <span class="p">(</span><span class="mi">12</span><span class="p">,</span> <span class="mi">6</span><span class="p">))</span>

<span class="n">axs</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">hist</span><span class="p">([</span><span class="n">pol</span> <span class="k">for</span> <span class="n">pol</span> <span class="ow">in</span> <span class="n">aapl_8ks</span><span class="o">.</span><span class="n">report_polarities</span> <span class="k">if</span> <span class="ow">not</span><span class="p">(</span><span class="n">pol</span> <span class="ow">is</span> <span class="n">pd</span><span class="o">.</span><span class="n">NA</span><span class="p">)])</span>
<span class="n">axs</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s2">&quot;Report polarities&quot;</span><span class="p">)</span>
<span class="n">axs</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">hist</span><span class="p">([</span><span class="n">pol</span> <span class="k">for</span> <span class="n">pol</span> <span class="ow">in</span> <span class="n">aapl_8ks</span><span class="o">.</span><span class="n">extension_polarities</span> <span class="k">if</span> <span class="ow">not</span><span class="p">(</span><span class="n">pol</span> <span class="ow">is</span> <span class="n">pd</span><span class="o">.</span><span class="n">NA</span><span class="p">)])</span>
<span class="n">axs</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s2">&quot;Extension polarities (if present)&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Hardware accelerator e.g. GPU is available in the environment, but no `device` argument is passed to the `Pipeline` object. Model will be on CPU.
</pre></div>
</div>
<img alt="_images/6c15187bd4f408e7b6c4e113a8b02274e6b4f8443598fb134ac2c42d9dad2074.png" src="_images/6c15187bd4f408e7b6c4e113a8b02274e6b4f8443598fb134ac2c42d9dad2074.png" />
</div>
</div>
<p>The historgrams above exhibit aggregated financial sentiment which is derived as described before. We observe that 8-K filings themselves seem to be written in a very neutral tone. However, exhibhts are characterized by very positive tone. It can not be stated with certainty if this observation is impacted by a potential positive bias the FinBert model may have or it is simply based on the fact that Apple is a successful company which is more likely to share positive statements about their development. To examine this in a little more detail, we contrast these measures by the dictionary based polarity approach as described in Chapter 2, hereby, using the Loughrain and McDonald (2011) dictionary. The cellse below show that we can not find a similar positive bias. At the same time, the correlation between FinBert and Loughrain/McDonald sentiment is relatively high for exhibits.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pysentiment2</span> <span class="k">as</span> <span class="nn">ps</span>

<span class="n">lm</span> <span class="o">=</span> <span class="n">ps</span><span class="o">.</span><span class="n">LM</span><span class="p">()</span>

<span class="n">report_polarities</span> <span class="o">=</span> <span class="p">[]</span>
<span class="n">extension_polarities</span> <span class="o">=</span> <span class="p">[]</span>

<span class="k">for</span> <span class="n">idx</span><span class="p">,</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">aapl_8ks</span><span class="o">.</span><span class="n">iterrows</span><span class="p">():</span>
    <span class="k">if</span> <span class="ow">not</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">isnull</span><span class="p">(</span><span class="n">row</span><span class="o">.</span><span class="n">report</span><span class="p">)):</span>
        <span class="n">lm_tokens_report</span> <span class="o">=</span> <span class="n">lm</span><span class="o">.</span><span class="n">tokenize</span><span class="p">(</span><span class="n">row</span><span class="o">.</span><span class="n">report</span><span class="p">)</span>
        <span class="n">lm_score_report</span> <span class="o">=</span> <span class="n">lm</span><span class="o">.</span><span class="n">get_score</span><span class="p">(</span><span class="n">lm_tokens_report</span><span class="p">)</span>
        <span class="n">report_polarities</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">lm_score_report</span><span class="p">[</span><span class="s2">&quot;Polarity&quot;</span><span class="p">])</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">report_polarities</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">NA</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">isnull</span><span class="p">(</span><span class="n">row</span><span class="o">.</span><span class="n">extension991</span><span class="p">)):</span>
        <span class="n">lm_tokens_extension</span> <span class="o">=</span> <span class="n">lm</span><span class="o">.</span><span class="n">tokenize</span><span class="p">(</span><span class="n">row</span><span class="o">.</span><span class="n">extension991</span><span class="p">)</span>
        <span class="n">lm_score_extension</span> <span class="o">=</span> <span class="n">lm</span><span class="o">.</span><span class="n">get_score</span><span class="p">(</span><span class="n">lm_tokens_extension</span><span class="p">)</span>
        <span class="n">extension_polarities</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">lm_score_extension</span><span class="p">[</span><span class="s2">&quot;Polarity&quot;</span><span class="p">])</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">extension_polarities</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">NA</span><span class="p">)</span>

<span class="n">aapl_8ks</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span> <span class="s2">&quot;report_polarities_lm&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">report_polarities</span>
<span class="n">aapl_8ks</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span> <span class="s2">&quot;extension_polarities_lm&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">extension_polarities</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">aapl_8ks</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span> <span class="p">[</span><span class="s2">&quot;report_polarities&quot;</span><span class="p">,</span> <span class="s2">&quot;report_polarities_lm&quot;</span><span class="p">]]</span><span class="o">.</span><span class="n">dropna</span><span class="p">()</span><span class="o">.</span><span class="n">corr</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>report_polarities</th>
      <th>report_polarities_lm</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>report_polarities</th>
      <td>1.000000</td>
      <td>0.133629</td>
    </tr>
    <tr>
      <th>report_polarities_lm</th>
      <td>0.133629</td>
      <td>1.000000</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">aapl_8ks</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span> <span class="p">[</span><span class="s2">&quot;extension_polarities&quot;</span><span class="p">,</span> <span class="s2">&quot;extension_polarities_lm&quot;</span><span class="p">]]</span><span class="o">.</span><span class="n">dropna</span><span class="p">()</span><span class="o">.</span><span class="n">corr</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>extension_polarities</th>
      <th>extension_polarities_lm</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>extension_polarities</th>
      <td>1.000000</td>
      <td>0.674941</td>
    </tr>
    <tr>
      <th>extension_polarities_lm</th>
      <td>0.674941</td>
      <td>1.000000</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">matplotlib.pylab</span> <span class="k">as</span> <span class="nn">plt</span>

<span class="n">fig</span><span class="p">,</span> <span class="n">axs</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">figsize</span> <span class="o">=</span> <span class="p">(</span><span class="mi">12</span><span class="p">,</span> <span class="mi">6</span><span class="p">))</span>
<span class="n">aapl_8ks</span><span class="o">.</span><span class="n">loc</span><span class="p">[:</span> <span class="p">,</span> <span class="s2">&quot;report_polarities&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">hist</span><span class="p">(</span><span class="n">ax</span> <span class="o">=</span> <span class="n">axs</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">color</span> <span class="o">=</span> <span class="s2">&quot;green&quot;</span><span class="p">,</span> <span class="n">alpha</span> <span class="o">=</span> <span class="mf">0.75</span><span class="p">,</span> <span class="n">label</span> <span class="o">=</span> <span class="s2">&quot;FinBert&quot;</span><span class="p">)</span>
<span class="n">aapl_8ks</span><span class="o">.</span><span class="n">loc</span><span class="p">[:</span> <span class="p">,</span> <span class="s2">&quot;report_polarities_lm&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">hist</span><span class="p">(</span><span class="n">ax</span> <span class="o">=</span> <span class="n">axs</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">color</span> <span class="o">=</span> <span class="s2">&quot;orange&quot;</span><span class="p">,</span> <span class="n">alpha</span> <span class="o">=</span> <span class="mf">0.75</span><span class="p">,</span> <span class="n">label</span> <span class="o">=</span> <span class="s2">&quot;LMcD&quot;</span><span class="p">)</span>
<span class="n">aapl_8ks</span><span class="o">.</span><span class="n">loc</span><span class="p">[:</span> <span class="p">,</span> <span class="s2">&quot;extension_polarities&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">hist</span><span class="p">(</span><span class="n">ax</span> <span class="o">=</span> <span class="n">axs</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">color</span> <span class="o">=</span> <span class="s2">&quot;green&quot;</span><span class="p">,</span> <span class="n">alpha</span> <span class="o">=</span> <span class="mf">0.75</span><span class="p">)</span>
<span class="n">aapl_8ks</span><span class="o">.</span><span class="n">loc</span><span class="p">[:</span> <span class="p">,</span> <span class="s2">&quot;extension_polarities_lm&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">hist</span><span class="p">(</span><span class="n">ax</span> <span class="o">=</span> <span class="n">axs</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">color</span> <span class="o">=</span> <span class="s2">&quot;orange&quot;</span><span class="p">,</span> <span class="n">alpha</span> <span class="o">=</span> <span class="mf">0.75</span><span class="p">)</span>
<span class="n">axs</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;matplotlib.legend.Legend at 0x33b26eed0&gt;
</pre></div>
</div>
<img alt="_images/320e0b0676ff44acd421c38086e033f41d4b812dd5dab49180d5d61891fe2b81.png" src="_images/320e0b0676ff44acd421c38086e033f41d4b812dd5dab49180d5d61891fe2b81.png" />
</div>
</div>
<p>As describe in the previous chapter, we want to examine the relationship between polarity in each report and exhibit and the cumulative abnormal return. This time, we use the Fama/French three factor model to determine Apple’s abnormal returns. The cells below show positive correlation between FinBert polarity scores and cumulative abnormal returns. At the same time Loughrain/McDonald polarity and cumulative abnormal returns is close to zero and slightly negative. The latter does not seem to be in line with economic intuition. We would expect that postive statements by the company should trigger positive stock market reactions.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">yfinance</span> <span class="k">as</span> <span class="nn">yf</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">from</span> <span class="nn">utils</span> <span class="kn">import</span> <span class="n">get_ff_factors</span>

<span class="k">try</span><span class="p">:</span>
    <span class="n">aapl_returns</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s2">&quot;../data/aapl_polarity_case_study.csv&quot;</span><span class="p">,</span> <span class="n">index_col</span> <span class="o">=</span> <span class="s2">&quot;Date&quot;</span><span class="p">)</span>
    <span class="n">aapl_returns</span><span class="o">.</span><span class="n">index</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">(</span><span class="n">aapl_returns</span><span class="o">.</span><span class="n">index</span><span class="p">)</span>
<span class="k">except</span><span class="p">:</span>
    <span class="n">aapl_stock_data</span> <span class="o">=</span> <span class="n">yf</span><span class="o">.</span><span class="n">download</span><span class="p">(</span><span class="n">tickers</span> <span class="o">=</span> <span class="s2">&quot;AAPL&quot;</span><span class="p">,</span> <span class="n">start</span> <span class="o">=</span> <span class="s2">&quot;2003-01-01&quot;</span><span class="p">,</span> <span class="n">end</span> <span class="o">=</span> <span class="s2">&quot;2023-12-31&quot;</span><span class="p">)</span>
    <span class="n">aapl_stock_data</span> <span class="o">=</span> <span class="n">aapl_stock_data</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span> <span class="p">[</span><span class="s2">&quot;Adj Close&quot;</span><span class="p">]]</span>
    <span class="n">aapl_returns</span> <span class="o">=</span> <span class="n">aapl_stock_data</span><span class="o">.</span><span class="n">pct_change</span><span class="p">()</span><span class="o">.</span><span class="n">dropna</span><span class="p">()</span>
    <span class="n">aapl_returns</span><span class="o">.</span><span class="n">columns</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;r_t&quot;</span><span class="p">]</span>
    <span class="n">aapl_returns</span> <span class="o">=</span> <span class="n">aapl_stock_data</span><span class="o">.</span><span class="n">pct_change</span><span class="p">()</span><span class="o">.</span><span class="n">dropna</span><span class="p">()</span>

<span class="n">df_ff</span> <span class="o">=</span> <span class="n">get_ff_factors</span><span class="p">()</span>
<span class="n">df_ff3</span> <span class="o">=</span> <span class="n">aapl_returns</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span><span class="n">df_ff</span><span class="p">,</span> <span class="n">left_index</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="n">right_index</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span>
<span class="n">df_ff3</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>r_t</th>
      <th>Mkt-RF</th>
      <th>SMB</th>
      <th>HML</th>
      <th>RF</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>2003-01-03</th>
      <td>0.006754</td>
      <td>-0.0011</td>
      <td>-0.0047</td>
      <td>0.0015</td>
      <td>0.00005</td>
    </tr>
    <tr>
      <th>2003-01-06</th>
      <td>0.000000</td>
      <td>0.0213</td>
      <td>-0.0056</td>
      <td>-0.0042</td>
      <td>0.00005</td>
    </tr>
    <tr>
      <th>2003-01-07</th>
      <td>-0.003352</td>
      <td>-0.0063</td>
      <td>0.0022</td>
      <td>-0.0012</td>
      <td>0.00005</td>
    </tr>
    <tr>
      <th>2003-01-08</th>
      <td>-0.020205</td>
      <td>-0.0134</td>
      <td>0.0006</td>
      <td>0.0057</td>
      <td>0.00005</td>
    </tr>
    <tr>
      <th>2003-01-09</th>
      <td>0.008937</td>
      <td>0.0189</td>
      <td>-0.0009</td>
      <td>-0.0043</td>
      <td>0.00005</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">statsmodels.api</span> <span class="k">as</span> <span class="nn">sm</span>
<span class="kn">from</span> <span class="nn">tqdm.auto</span> <span class="kn">import</span> <span class="n">tqdm</span>

<span class="n">aapl_8ks</span> <span class="o">=</span> <span class="n">aapl_8ks</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="n">by</span> <span class="o">=</span> <span class="s2">&quot;filingDate&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">reset_index</span><span class="p">(</span><span class="n">drop</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span>
<span class="n">cars</span> <span class="o">=</span> <span class="p">[]</span>

<span class="k">for</span> <span class="n">date</span> <span class="ow">in</span> <span class="n">tqdm</span><span class="p">(</span><span class="n">aapl_8ks</span><span class="o">.</span><span class="n">filingDate</span><span class="p">):</span>
    <span class="n">filing_date</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">(</span><span class="n">date</span><span class="p">)</span>
    <span class="n">reg_start</span> <span class="o">=</span> <span class="n">filing_date</span> <span class="o">-</span> <span class="n">pd</span><span class="o">.</span><span class="n">offsets</span><span class="o">.</span><span class="n">BusinessDay</span><span class="p">(</span><span class="mi">252</span><span class="p">)</span>
    <span class="n">reg_end</span> <span class="o">=</span> <span class="n">filing_date</span> <span class="o">-</span> <span class="n">pd</span><span class="o">.</span><span class="n">offsets</span><span class="o">.</span><span class="n">BusinessDay</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
    <span class="n">event_start</span> <span class="o">=</span> <span class="n">filing_date</span> <span class="c1">#- pd.offsets.BusinessDay(1)</span>
    <span class="n">event_end</span> <span class="o">=</span> <span class="n">filing_date</span> <span class="o">+</span> <span class="n">pd</span><span class="o">.</span><span class="n">offsets</span><span class="o">.</span><span class="n">BusinessDay</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>

    <span class="n">X</span> <span class="o">=</span> <span class="n">df_ff3</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">reg_start</span><span class="p">:</span><span class="n">reg_end</span><span class="p">,</span> <span class="p">[</span><span class="s2">&quot;Mkt-RF&quot;</span><span class="p">,</span> <span class="s2">&quot;SMB&quot;</span><span class="p">,</span> <span class="s2">&quot;HML&quot;</span><span class="p">]]</span>
    <span class="n">X</span> <span class="o">=</span> <span class="n">sm</span><span class="o">.</span><span class="n">add_constant</span><span class="p">(</span><span class="n">X</span><span class="p">)</span>
    <span class="n">y</span> <span class="o">=</span> <span class="n">df_ff3</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">reg_start</span><span class="p">:</span><span class="n">reg_end</span><span class="p">,</span> <span class="s2">&quot;r_t&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">subtract</span><span class="p">(</span><span class="n">df_ff3</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">reg_start</span><span class="p">:</span><span class="n">reg_end</span><span class="p">,</span> <span class="s2">&quot;RF&quot;</span><span class="p">])</span>
    <span class="n">model</span> <span class="o">=</span> <span class="n">sm</span><span class="o">.</span><span class="n">OLS</span><span class="p">(</span><span class="n">y</span><span class="p">,</span> <span class="n">X</span><span class="p">)</span><span class="o">.</span><span class="n">fit</span><span class="p">()</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">X_event</span> <span class="o">=</span> <span class="n">df_ff3</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">event_start</span><span class="p">:</span><span class="n">event_end</span><span class="p">,</span> <span class="p">[</span><span class="s2">&quot;Mkt-RF&quot;</span><span class="p">,</span> <span class="s2">&quot;SMB&quot;</span><span class="p">,</span> <span class="s2">&quot;HML&quot;</span><span class="p">]]</span>
        <span class="n">X_event</span> <span class="o">=</span> <span class="n">sm</span><span class="o">.</span><span class="n">add_constant</span><span class="p">(</span><span class="n">X_event</span><span class="p">)</span>
        <span class="n">y_event</span> <span class="o">=</span> <span class="n">df_ff3</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">event_start</span><span class="p">:</span><span class="n">event_end</span><span class="p">,</span> <span class="s2">&quot;r_t&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">subtract</span><span class="p">(</span><span class="n">df_ff3</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">event_start</span><span class="p">:</span><span class="n">event_end</span><span class="p">,</span> <span class="s2">&quot;RF&quot;</span><span class="p">])</span>
        <span class="n">pred_ret</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">predict</span><span class="p">(</span><span class="n">X_event</span><span class="p">)</span>
        <span class="n">abnormal_returns</span> <span class="o">=</span> <span class="n">y_event</span> <span class="o">-</span> <span class="n">pred_ret</span>
        <span class="n">car_t</span> <span class="o">=</span> <span class="n">abnormal_returns</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
    <span class="k">except</span><span class="p">:</span>
        <span class="n">X_event</span> <span class="o">=</span> <span class="n">df_ff3</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">event_start</span><span class="p">:</span><span class="n">event_end</span><span class="p">,</span> <span class="p">[</span><span class="s2">&quot;Mkt-RF&quot;</span><span class="p">,</span> <span class="s2">&quot;SMB&quot;</span><span class="p">,</span> <span class="s2">&quot;HML&quot;</span><span class="p">]]</span>
        <span class="n">X_event</span> <span class="o">=</span> <span class="n">sm</span><span class="o">.</span><span class="n">add_constant</span><span class="p">(</span><span class="n">X_event</span><span class="p">,</span> <span class="n">has_constant</span><span class="o">=</span><span class="s2">&quot;add&quot;</span><span class="p">)</span>
        <span class="n">y_event</span> <span class="o">=</span> <span class="n">df_ff3</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">event_start</span><span class="p">:</span><span class="n">event_end</span><span class="p">,</span> <span class="s2">&quot;r_t&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">subtract</span><span class="p">(</span><span class="n">df_ff3</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">event_start</span><span class="p">:</span><span class="n">event_end</span><span class="p">,</span> <span class="s2">&quot;RF&quot;</span><span class="p">])</span>
        <span class="n">pred_ret</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">predict</span><span class="p">(</span><span class="n">X_event</span><span class="p">)</span>
        <span class="n">abnormal_returns</span> <span class="o">=</span> <span class="n">y_event</span> <span class="o">-</span> <span class="n">pred_ret</span>
        <span class="n">car_t</span> <span class="o">=</span> <span class="n">abnormal_returns</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
    <span class="n">cars</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">car_t</span><span class="p">)</span>

<span class="n">aapl_8ks</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span> <span class="s2">&quot;car_t&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">cars</span>
<span class="n">aapl_8ks</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>  0%|                                                                                                                                                     | 0/186 [00:00&lt;?, ?it/s]
</pre></div>
</div>
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span> 42%|██████████████████████████████████████████████████████████▎                                                                                | 78/186 [00:00&lt;00:00, 777.67it/s]
</pre></div>
</div>
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span> 87%|████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████▏                 | 162/186 [00:00&lt;00:00, 809.52it/s]
</pre></div>
</div>
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>100%|██████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████| 186/186 [00:00&lt;00:00, 809.30it/s]
</pre></div>
</div>
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>
</pre></div>
</div>
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>filingDate</th>
      <th>reportDate</th>
      <th>items</th>
      <th>report</th>
      <th>extension991</th>
      <th>report_polarities</th>
      <th>extension_polarities</th>
      <th>report_polarities_lm</th>
      <th>extension_polarities_lm</th>
      <th>car_t</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>2004-01-14</td>
      <td>2004-01-14</td>
      <td>12,7</td>
      <td>UNITED STATES SECURITIES AND EXCHANGE COMMISSI...</td>
      <td>Exhibit\n99.1 Apple Reports First Quarter Resu...</td>
      <td>0.0</td>
      <td>0.500000</td>
      <td>-0.6</td>
      <td>-0.05</td>
      <td>-0.064076</td>
    </tr>
    <tr>
      <th>1</th>
      <td>2004-04-14</td>
      <td>2004-04-14</td>
      <td>12,7</td>
      <td>UNITED STATES SECURITIES AND EXCHANGE COMMISSI...</td>
      <td>Exhibit\n99.1 Apple Reports\nSecond Quarter Re...</td>
      <td>0.0</td>
      <td>0.666667</td>
      <td>-0.6</td>
      <td>-0.095238</td>
      <td>0.086979</td>
    </tr>
    <tr>
      <th>2</th>
      <td>2004-07-14</td>
      <td>2004-07-14</td>
      <td>12,7</td>
      <td>UNITED STATES SECURITIES AND EXCHANGE COMMISSI...</td>
      <td>Exhibit 99.1 Press Contact: June 26, September...</td>
      <td>0.0</td>
      <td>0.000000</td>
      <td>-0.6</td>
      <td>-0.8</td>
      <td>0.139750</td>
    </tr>
    <tr>
      <th>3</th>
      <td>2004-10-13</td>
      <td>2004-10-13</td>
      <td>2.02,9.01</td>
      <td>UNITED STATES\nSECURITIES AND EXCHANGE COMMISS...</td>
      <td>Exhibit 99.1 Apple Reports Fourth\nQuarter Res...</td>
      <td>0.0</td>
      <td>0.777778</td>
      <td>-0.333333</td>
      <td>0.0</td>
      <td>0.183954</td>
    </tr>
    <tr>
      <th>4</th>
      <td>2005-01-11</td>
      <td>2005-01-11</td>
      <td>2.02</td>
      <td>UNITED\nSTATES SECURITIES\nAND EXCHANGE COMMIS...</td>
      <td>NaN</td>
      <td>0.0</td>
      <td>NaN</td>
      <td>1.0</td>
      <td>&lt;NA&gt;</td>
      <td>-0.050481</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">aapl_8ks</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span> <span class="p">[</span><span class="s2">&quot;car_t&quot;</span><span class="p">,</span> <span class="s2">&quot;report_polarities&quot;</span><span class="p">,</span> <span class="s2">&quot;report_polarities_lm&quot;</span><span class="p">]]</span><span class="o">.</span><span class="n">dropna</span><span class="p">()</span><span class="o">.</span><span class="n">corr</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>car_t</th>
      <th>report_polarities</th>
      <th>report_polarities_lm</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>car_t</th>
      <td>1.000000</td>
      <td>0.070879</td>
      <td>-0.098293</td>
    </tr>
    <tr>
      <th>report_polarities</th>
      <td>0.070879</td>
      <td>1.000000</td>
      <td>0.133629</td>
    </tr>
    <tr>
      <th>report_polarities_lm</th>
      <td>-0.098293</td>
      <td>0.133629</td>
      <td>1.000000</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">aapl_8ks</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span> <span class="p">[</span><span class="s2">&quot;car_t&quot;</span><span class="p">,</span> <span class="s2">&quot;extension_polarities&quot;</span><span class="p">,</span> <span class="s2">&quot;extension_polarities_lm&quot;</span><span class="p">]]</span><span class="o">.</span><span class="n">dropna</span><span class="p">()</span><span class="o">.</span><span class="n">corr</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>car_t</th>
      <th>extension_polarities</th>
      <th>extension_polarities_lm</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>car_t</th>
      <td>1.000000</td>
      <td>0.076400</td>
      <td>-0.084848</td>
    </tr>
    <tr>
      <th>extension_polarities</th>
      <td>0.076400</td>
      <td>1.000000</td>
      <td>0.674941</td>
    </tr>
    <tr>
      <th>extension_polarities_lm</th>
      <td>-0.084848</td>
      <td>0.674941</td>
      <td>1.000000</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>Summing up, the results seem to be rather mixed. While FinBert based polarities may be exposed to a positive bias, they seem to be more correlated to intuitive stock market reactions. Taking a closer look at the results below, the positive correlation may simply come from the overall positive polarity by FinBert and a large amount of positive cumulative abnormal returns.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">aapl_8ks</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="n">by</span> <span class="o">=</span> <span class="s2">&quot;car_t&quot;</span><span class="p">,</span> <span class="n">ascending</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>filingDate</th>
      <th>reportDate</th>
      <th>items</th>
      <th>report</th>
      <th>extension991</th>
      <th>report_polarities</th>
      <th>extension_polarities</th>
      <th>report_polarities_lm</th>
      <th>extension_polarities_lm</th>
      <th>car_t</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>8</th>
      <td>2005-04-13</td>
      <td>2005-04-13</td>
      <td>2.02,9.01</td>
      <td>UNITED STATES\nSECURITIES AND EXCHANGE COMMISS...</td>
      <td>Exhibit 99.1 Apple Reports Second Quarter Resu...</td>
      <td>0.0</td>
      <td>0.833333</td>
      <td>-0.333333</td>
      <td>0.0</td>
      <td>-0.114717</td>
    </tr>
    <tr>
      <th>76</th>
      <td>2013-01-23</td>
      <td>2013-01-23</td>
      <td>2.02,9.01</td>
      <td>UNITED STATES  SECURITIES AND EXCHANGE COMMISS...</td>
      <td>Exhibit 99.1  Apple Reports Record Results  47...</td>
      <td>0.0</td>
      <td>0.800000</td>
      <td>0.0</td>
      <td>0.081081</td>
      <td>-0.110534</td>
    </tr>
    <tr>
      <th>38</th>
      <td>2008-01-22</td>
      <td>2008-01-22</td>
      <td>2.02,9.01</td>
      <td>UNITED STATES  SECURITIES AND EXCHANGE COMMISS...</td>
      <td>Exhibit 99.1  Apple Reports First Quarter Resu...</td>
      <td>0.0</td>
      <td>0.777778</td>
      <td>0.0</td>
      <td>-0.090909</td>
      <td>-0.101054</td>
    </tr>
    <tr>
      <th>18</th>
      <td>2006-01-18</td>
      <td>2006-01-18</td>
      <td>2.02,9.01</td>
      <td>UNITED STATES\nSECURITIES AND EXCHANGE COMMISS...</td>
      <td>Exhibit 99.1 Apple Reports First Quarter Resul...</td>
      <td>0.0</td>
      <td>0.500000</td>
      <td>-0.333333</td>
      <td>0.219512</td>
      <td>-0.080860</td>
    </tr>
    <tr>
      <th>29</th>
      <td>2007-01-17</td>
      <td>2007-01-17</td>
      <td>2.02,9.01</td>
      <td>UNITED STATES SECURITIES AND EXCHANGE COMMISSI...</td>
      <td>Exhibit 99.1 Apple Reports First Quarter Resul...</td>
      <td>0.0</td>
      <td>0.777778</td>
      <td>-0.333333</td>
      <td>0.25</td>
      <td>-0.078899</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>45</th>
      <td>2009-01-21</td>
      <td>2009-01-21</td>
      <td>2.02,9.01</td>
      <td>UNITED STATES  SECURITIES AND EXCHANGE COMMISS...</td>
      <td>Exhibit 99.1  Apple Reports First Quarter Resu...</td>
      <td>0.0</td>
      <td>0.789474</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.103793</td>
    </tr>
    <tr>
      <th>21</th>
      <td>2006-07-19</td>
      <td>2006-07-19</td>
      <td>2.02,9.01</td>
      <td>UNITED STATES SECURITIES AND EXCHANGE\nCOMMISS...</td>
      <td>Exhibit 99.1 Apple\nReports Third Quarter Resu...</td>
      <td>0.0</td>
      <td>0.692308</td>
      <td>-0.333333</td>
      <td>0.172414</td>
      <td>0.129124</td>
    </tr>
    <tr>
      <th>43</th>
      <td>2008-10-21</td>
      <td>2008-10-21</td>
      <td>2.02,9.01</td>
      <td>UNITED STATES  SECURITIES AND EXCHANGE COMMISS...</td>
      <td>Exhibit 99.1  Apple Reports Fourth Quarter Res...</td>
      <td>0.0</td>
      <td>0.789474</td>
      <td>0.0</td>
      <td>0.013333</td>
      <td>0.131215</td>
    </tr>
    <tr>
      <th>2</th>
      <td>2004-07-14</td>
      <td>2004-07-14</td>
      <td>12,7</td>
      <td>UNITED STATES SECURITIES AND EXCHANGE COMMISSI...</td>
      <td>Exhibit 99.1 Press Contact: June 26, September...</td>
      <td>0.0</td>
      <td>0.000000</td>
      <td>-0.6</td>
      <td>-0.8</td>
      <td>0.139750</td>
    </tr>
    <tr>
      <th>3</th>
      <td>2004-10-13</td>
      <td>2004-10-13</td>
      <td>2.02,9.01</td>
      <td>UNITED STATES\nSECURITIES AND EXCHANGE COMMISS...</td>
      <td>Exhibit 99.1 Apple Reports Fourth\nQuarter Res...</td>
      <td>0.0</td>
      <td>0.777778</td>
      <td>-0.333333</td>
      <td>0.0</td>
      <td>0.183954</td>
    </tr>
  </tbody>
</table>
<p>186 rows × 10 columns</p>
</div></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">aapl_8ks</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="n">by</span> <span class="o">=</span> <span class="s2">&quot;car_t&quot;</span><span class="p">,</span> <span class="n">ascending</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>filingDate</th>
      <th>reportDate</th>
      <th>items</th>
      <th>report</th>
      <th>extension991</th>
      <th>report_polarities</th>
      <th>extension_polarities</th>
      <th>report_polarities_lm</th>
      <th>extension_polarities_lm</th>
      <th>car_t</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>3</th>
      <td>2004-10-13</td>
      <td>2004-10-13</td>
      <td>2.02,9.01</td>
      <td>UNITED STATES\nSECURITIES AND EXCHANGE COMMISS...</td>
      <td>Exhibit 99.1 Apple Reports Fourth\nQuarter Res...</td>
      <td>0.0</td>
      <td>0.777778</td>
      <td>-0.333333</td>
      <td>0.0</td>
      <td>0.183954</td>
    </tr>
    <tr>
      <th>2</th>
      <td>2004-07-14</td>
      <td>2004-07-14</td>
      <td>12,7</td>
      <td>UNITED STATES SECURITIES AND EXCHANGE COMMISSI...</td>
      <td>Exhibit 99.1 Press Contact: June 26, September...</td>
      <td>0.0</td>
      <td>0.000000</td>
      <td>-0.6</td>
      <td>-0.8</td>
      <td>0.139750</td>
    </tr>
    <tr>
      <th>43</th>
      <td>2008-10-21</td>
      <td>2008-10-21</td>
      <td>2.02,9.01</td>
      <td>UNITED STATES  SECURITIES AND EXCHANGE COMMISS...</td>
      <td>Exhibit 99.1  Apple Reports Fourth Quarter Res...</td>
      <td>0.0</td>
      <td>0.789474</td>
      <td>0.0</td>
      <td>0.013333</td>
      <td>0.131215</td>
    </tr>
    <tr>
      <th>21</th>
      <td>2006-07-19</td>
      <td>2006-07-19</td>
      <td>2.02,9.01</td>
      <td>UNITED STATES SECURITIES AND EXCHANGE\nCOMMISS...</td>
      <td>Exhibit 99.1 Apple\nReports Third Quarter Resu...</td>
      <td>0.0</td>
      <td>0.692308</td>
      <td>-0.333333</td>
      <td>0.172414</td>
      <td>0.129124</td>
    </tr>
    <tr>
      <th>45</th>
      <td>2009-01-21</td>
      <td>2009-01-21</td>
      <td>2.02,9.01</td>
      <td>UNITED STATES  SECURITIES AND EXCHANGE COMMISS...</td>
      <td>Exhibit 99.1  Apple Reports First Quarter Resu...</td>
      <td>0.0</td>
      <td>0.789474</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.103793</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>29</th>
      <td>2007-01-17</td>
      <td>2007-01-17</td>
      <td>2.02,9.01</td>
      <td>UNITED STATES SECURITIES AND EXCHANGE COMMISSI...</td>
      <td>Exhibit 99.1 Apple Reports First Quarter Resul...</td>
      <td>0.0</td>
      <td>0.777778</td>
      <td>-0.333333</td>
      <td>0.25</td>
      <td>-0.078899</td>
    </tr>
    <tr>
      <th>18</th>
      <td>2006-01-18</td>
      <td>2006-01-18</td>
      <td>2.02,9.01</td>
      <td>UNITED STATES\nSECURITIES AND EXCHANGE COMMISS...</td>
      <td>Exhibit 99.1 Apple Reports First Quarter Resul...</td>
      <td>0.0</td>
      <td>0.500000</td>
      <td>-0.333333</td>
      <td>0.219512</td>
      <td>-0.080860</td>
    </tr>
    <tr>
      <th>38</th>
      <td>2008-01-22</td>
      <td>2008-01-22</td>
      <td>2.02,9.01</td>
      <td>UNITED STATES  SECURITIES AND EXCHANGE COMMISS...</td>
      <td>Exhibit 99.1  Apple Reports First Quarter Resu...</td>
      <td>0.0</td>
      <td>0.777778</td>
      <td>0.0</td>
      <td>-0.090909</td>
      <td>-0.101054</td>
    </tr>
    <tr>
      <th>76</th>
      <td>2013-01-23</td>
      <td>2013-01-23</td>
      <td>2.02,9.01</td>
      <td>UNITED STATES  SECURITIES AND EXCHANGE COMMISS...</td>
      <td>Exhibit 99.1  Apple Reports Record Results  47...</td>
      <td>0.0</td>
      <td>0.800000</td>
      <td>0.0</td>
      <td>0.081081</td>
      <td>-0.110534</td>
    </tr>
    <tr>
      <th>8</th>
      <td>2005-04-13</td>
      <td>2005-04-13</td>
      <td>2.02,9.01</td>
      <td>UNITED STATES\nSECURITIES AND EXCHANGE COMMISS...</td>
      <td>Exhibit 99.1 Apple Reports Second Quarter Resu...</td>
      <td>0.0</td>
      <td>0.833333</td>
      <td>-0.333333</td>
      <td>0.0</td>
      <td>-0.114717</td>
    </tr>
  </tbody>
</table>
<p>186 rows × 10 columns</p>
</div></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">sen</span> <span class="ow">in</span> <span class="n">sent_detector</span><span class="o">.</span><span class="n">tokenize</span><span class="p">(</span><span class="n">aapl_8ks</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="n">by</span> <span class="o">=</span> <span class="s2">&quot;car_t&quot;</span><span class="p">,</span> <span class="n">ascending</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">extension991</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">sen</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot; &quot;</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Exhibit 99.1 Apple Reports Fourth Quarter Results Revenue Increases 37 Percent Year-Over-Year iPod Shipments Top 2 million CUPERTINO, CaliforniaOctober 13, 2004Apple® today announced financial results for its fiscal 2004 fourth quarter ended September 25, 2004.
For the quarter, the Company posted a net profit of $106 million, or $.26 per diluted share.
These results compare to a net profit of $44 million, or $.12 per diluted share, in the year-ago quarter.
Revenue for the quarter was $2.35 billion, up 37 percent from the year-ago quarter.
Gross margin was 27.0 percent, up from 26.6 percent in the year-ago quarter.
International sales accounted for 37 percent of the quarters revenue.
The quarters results include an after-tax restructuring charge of $4 million.
Excluding this charge, the Companys net profit for the quarter would have been $110 million, or $.27 per diluted share.
Apple shipped 836,000 Macintosh® units and 2,016,000 iPods during the quarter, representing a 6 percent increase in CPU units and a 500 percent increase in iPods over the year-ago quarter.
We are thrilled to report our highest fourth quarter revenue in nine years, said Steve Jobs, Apples CEO.
We shipped over 2 million iPods, our Retail store revenue grew 95 percent year-over-year, and the new iMac G5 has received phenomenal reviews and is off to a great start. Were pleased to report 37 percent revenue growth for the quarter and operating margin above 5 percent, said Peter Oppenheimer, Apples CFO.
Looking ahead to the first quarter of fiscal 2005, we expect revenue of between $2.8 and $2.9 billion, operating margin above 7 percent and earnings per diluted share of $.39 to $.42. For the year, the Company reported net income of $276 million on revenue of $8.28 billion compared to net income of $69 million on revenue of $6.21 billion in 2003.
Non-GAAP Measures The Company believes that presentation of results excluding items such as restructuring charges and investment gains provides meaningful supplemental information to both management and investors that is indicative of the Companys core operating results and facilitates comparison of operating results across reporting periods.
The Company includes a full income statement reconciliation of these non-GAAP measures to provide a more complete view of their effect on results.
Apple will provide live streaming of its Q4 2004 financial results conference call utilizing QuickTime, Apples standards-based technology for live and on-demand audio and video streaming.
The live webcast will begin at 2:00 p.m. PDT on Wednesday, October 13, 2004 at http://www.apple.com/quicktime/qtv/earningsq404/ and will also be available for replay.
The QuickTime player is available free for Macintosh and Windows users at www.apple.com/quicktime.
This press release contains forward-looking statements about the Companys estimated revenue and earnings for the first quarter of fiscal 2005.
These statements involve risks and uncertainties and actual results may differ.
Potential risks and uncertainties include continued competitive pressures in the marketplace; the effect competitive and economic factors and the Companys reaction to them may have on consumer and business buying decisions with respect to the Companys products; the ability of the Company to make timely delivery of new programs, products and successful technological innovations to the marketplace; the continued availability of certain components and services essential to the Companys business currently obtained by the Company from sole or limited sources, including the timely resolution of manufacturing issues associated with the G5 microprocessors used in many of the Companys Macintosh systems; possible disruption in commercial activities caused by terrorist activity and armed conflict, such as changes in logistics and security arrangements, and reduced end-user purchases relative to expectations; possible disruption in commercial activity as a result of major health concerns including epidemics; risks associated with the Companys retail initiative including significant investment cost, uncertain consumer acceptance and potential impact on existing reseller relationships; the effect that the Companys dependency on manufacturing and logistics services provided by third-parties may have on the quality, quantity or cost of products manufactured or services rendered; the Companys reliance on the availability of third-party music content, and the ability of the Company to successfully evolve its operating system and attract sufficient Macintosh developers.
More information on potential factors that could affect the Companys financial results is included from time to time in the Companys public reports filed with the SEC, including the Companys Forms 10-Q for the quarters ended December 27, 2003, March 27, 2004 and June 26, 2004; and the  Companys Form 10-K for the 2004 fiscal year to be filed with the SEC.
The Company assumes no obligation to update any forward-looking statements or information, which speak as of their respective dates.
Apple ignited the personal computer revolution in the 1970s with the Apple II and reinvented the personal computer in the 1980s with the Macintosh.
Today, Apple continues to lead the industry in innovation with its award-winning desktop and notebook computers, OS X operating system, and iLife and professional applications.
Apple is also spearheading the digital music revolution with its iPod portable music players and iTunes online music store.
Press Contact: Steve Dowling (408) 974-1896 dowling@apple.com Investor Relations Contacts: Nancy Paxton (408) 974-5420 paxton1@apple.com Joan Hoover (408) 974-4570 hoover1@apple.com NOTE TO EDITORS: For additional information visit Apples PR website (www.apple.com/pr/), or call Apples Media Helpline at (408) 974-2042.
© 2004 Apple.
All rights reserved.
Apple, the Apple logo, Macintosh, Mac, Mac OS,  QuickTime, iPod and iMac are either registered trademarks or trademarks of Apple.
Other company and product names may be trademarks of their respective owners.
UNAUDITED CONDENSED CONSOLIDATED BALANCE SHEETS (In millions, except share amounts) September 25,   2004 September 27,   2003 ASSETS: Current assets: Cash and cash   equivalents 2,969 3,396 Short-term   investments 2,495 1,170 Accounts   receivable, less allowances of $47 and $49, respectively 774 766 Inventories 101 Deferred tax   assets 231 190 Other current   assets 485 309 Total current   assets 7,055 5,887 Property, plant,   and equipment, net 707 669 Goodwill Acquired intangible   assets Other assets 191 150 Total assets 8,050 6,815 LIABILITIES AND SHAREHOLDERS EQUITY: Current   liabilities: Accounts payable 1,451 1,154 Accrued expenses 1,229 899 Current debt 304 Total current   liabilities 2,680 2,357 Deferred tax   liabilities and other non-current liabilities 294 235 Total   liabilities 2,974 2,592 Commitments and   contingencies Shareholders   equity: Common stock, no   par value; 900,000,000 shares authorized; 391,443,617 and 366,726,584 shares   issued and outstanding, respectively 2,514 1,926 Deferred stock   compensation (93 (62 Retained   earnings 2,670 2,394 Accumulated   other comprehensive income (loss) (15 (35 Total   shareholders equity 5,076 4,223 Total   liabilities and shareholders equity 8,050 6,815 UNAUDITED CONDENSED CONSOLIDATED STATEMENTS OF OPERATIONS (In millions, except share and per share amounts) THREE MONTHS ENDED TWELVE MONTHS ENDED September 25,   2004 September 27,   2003 September 25,   2004 September 27,   2003 Net sales 2,350 1,715 8,279 6,207 Cost of sales 1,716 1,259 6,020 4,499 Gross margin 634 456 2,259 1,708 Operating   expenses: Research and   development 122 111 489 471 Selling,   general, and administrative 379 314 1,421 1,212 Restructuring   costs Total operating   expenses 506 425 1,933 1,709 Operating income   (loss) 128 326 Other income and   expense: Gain on sales of   non-current investments Interest and   other income, net Total other   income and expense Income before   provision for income taxes 147 383 Provision for   income taxes 107 Income before   accounting change 106 276 Cumulative   effect of accounting change, net Net income 106 276 Earnings per   common share before accounting change: Basic 0.28 0.11 0.74 0.19 Diluted 0.26 0.11 0.71 0.19 Earnings per   common share: Basic 0.28 0.12 0.74 0.19 Diluted 0.26 0.12 0.71 0.19 Shares used in   computing earnings per share (in thousands): Basic 383,463 362,191 371,590 360,631 Diluted 402,906 370,733 387,311 363,466 UNAUDITED NON-GAAP CONDENSED CONSOLIDATED STATEMENT OF OPERATIONS (In millions, except share and per share amounts) THREE MONTHS ENDED SEPTEMBER 25, 2004 As Reported Non-GAAP   Adjustments Non-GAAP Net sales 2,350 2,350 Cost of sales 1,716 1,716 Gross margin 634 634 Operating   expenses: Research and   development 122 122 Selling,   general, and administrative 379 379 Restructuring   costs )(a) Total operating   expenses 506 501 Operating income 128 133 Other income and   expense: Interest and   other income, net Total other   income and expense Income before   provision for income taxes 147 152 Provision for   income taxes (b) Net income 106 110 Earnings per   common share: Basic 0.28 0.29 Diluted 0.26 0.27 Shares used in   computing earnings per share (in thousands): Basic 383,463 383,463 Diluted 402,906 402,906 Notes: (a)  Pre-tax restructuring costs (b)  Tax impact of restructuring costs UNAUDITED NON-GAAP CONDENSED CONSOLIDATED STATEMENT OF OPERATIONS (In millions, except share and per share amounts) TWELVE MONTHS ENDED SEPTEMBER 25, 2004 As Reported Non-GAAP   Adjustments Non-GAAP Net sales 8,279 8,279 Cost of sales 6,020 6,020 Gross margin 2,259 2,259 Operating   expenses: Research and   development 489 489 Selling,   general, and administrative 1,421 1,421 Restructuring   costs (23 )(a) Total operating   expenses 1,933 (23 1,910 Operating income 326 349 Other income and   expense: Gain on sales of   non-current investments )(b) Interest and   other income, net Total other   income and expense Income before   provision for income taxes 383 402 Provision for   income taxes 107 (c) 112 Net income 276 290 Earnings per   common share: Basic 0.74 0.78 Diluted 0.71 0.75 Shares used in   computing earnings per share (in thousands): Basic 371,590 371,590 Diluted 387,311 387,311 Notes: (a)  Pre-tax restructuring costs (b)  Pre-tax gain on sales of non-current investments (c)   Tax impact of restructuring costs and gain on sales of non-current investments
</pre></div>
</div>
</div>
</div>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./."
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

                </article>
              

              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="09_bert.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">BERT</p>
      </div>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <dialog id="pst-secondary-sidebar-modal"></dialog>
                <div id="pst-secondary-sidebar" class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#form-8k-filings">Form 8K filings</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#financial-sentiment-in-form-8k-filings">Financial sentiment in form 8K filings</a></li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By Prof. Dr. Ralf Kellner
</p>

  </div>
  
  <div class="footer-item">
    

  <p class="copyright">
    
      © Copyright 2023.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script defer src="_static/scripts/bootstrap.js?digest=26a4bc78f4c0ddb94549"></script>
<script defer src="_static/scripts/pydata-sphinx-theme.js?digest=26a4bc78f4c0ddb94549"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>